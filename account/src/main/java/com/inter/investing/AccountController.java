package com.inter.investing;

import lombok.extern.slf4j.Slf4j;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@Slf4j
@RestController
@RequestMapping("api/v1/accounts")
public record AccountController(AccountService accountService) {

    @CrossOrigin(origins = "http://localhost:8080")
    @PostMapping
    private void registerAccount(@RequestBody AccountDTO accountDTO){
        accountService.registryAccount(accountDTO);
    }

    @CrossOrigin(origins = "http://localhost:8080")
    @PostMapping
    private void login(@RequestBody CredentialsDTO credentialsDTO){
        accountService.authenticate(credentialsDTO);
    }
    @GetMapping
    private List<Account> getAllAccounts(){
        return accountService.getAllAccounts();
    }

    @GetMapping(value = "/{id}")
    private Account getAccountById(@PathVariable Integer id){
        return accountService.getAccountById(id);
    }

    @GetMapping(value = "/teste")
    private String getAmdShare() {
        return "{\"quoteResponse\":{\"result\":[{\"language\":\"en-US\",\"region\":\"US\",\"quoteType\":\"EQUITY\",\"typeDisp\":\"Equity\",\"quoteSourceName\":\"Nasdaq Real Time Price\",\"triggerable\":true,\"customPriceAlertConfidence\":\"HIGH\",\"quoteSummary\":{\"earnings\":{\"maxAge\":86400,\"earningsChart\":{\"quarterly\":[{\"date\":\"2Q2021\",\"actual\":0.63,\"estimate\":0.54},{\"date\":\"3Q2021\",\"actual\":0.73,\"estimate\":0.67},{\"date\":\"4Q2021\",\"actual\":0.92,\"estimate\":0.76},{\"date\":\"1Q2022\",\"actual\":1.13,\"estimate\":0.91}],\"currentQuarterEstimate\":1.03,\"currentQuarterEstimateDate\":\"2Q\",\"currentQuarterEstimateYear\":2022,\"earningsDate\":[1658746740,1659096000]},\"financialsChart\":{\"yearly\":[{\"date\":2018,\"revenue\":6475000000,\"earnings\":337000000},{\"date\":2019,\"revenue\":6731000000,\"earnings\":341000000},{\"date\":2020,\"revenue\":9763000000,\"earnings\":2490000000},{\"date\":2021,\"revenue\":16434000000,\"earnings\":3162000000}],\"quarterly\":[{\"date\":\"2Q2021\",\"revenue\":3850000000,\"earnings\":710000000},{\"date\":\"3Q2021\",\"revenue\":4313000000,\"earnings\":923000000},{\"date\":\"4Q2021\",\"revenue\":4826000000,\"earnings\":974000000},{\"date\":\"1Q2022\",\"revenue\":0,\"earnings\":0}]},\"financialCurrency\":\"USD\"}},\"exDividendDate\":798940800,\"earningsTimestamp\":1651594206,\"earningsTimestampStart\":1658746740,\"earningsTimestampEnd\":1659096000,\"trailingAnnualDividendRate\":0.0,\"trailingPE\":35.084427,\"pegRatio\":0.67,\"dividendsPerShare\":0.0,\"trailingAnnualDividendYield\":0.0,\"revenue\":1.88760003E10,\"priceToSales\":8.027001,\"marketState\":\"CLOSED\",\"epsTrailingTwelveMonths\":2.665,\"epsForward\":5.0,\"epsCurrentYear\":4.41,\"epsNextQuarter\":1.1,\"priceEpsCurrentYear\":21.201815,\"priceEpsNextQuarter\":85.0,\"sharesOutstanding\":1620509952,\"bookValue\":34.156,\"fiftyDayAverage\":100.5428,\"fiftyDayAverageChange\":-7.042801,\"fiftyDayAverageChangePercent\":-0.07004779,\"twoHundredDayAverage\":117.3755,\"twoHundredDayAverageChange\":-23.875504,\"twoHundredDayAverageChangePercent\":-0.2034113,\"marketCap\":151517675520,\"forwardPE\":18.7,\"currency\":\"USD\",\"priceToBook\":2.73744,\"sourceInterval\":15,\"exchangeDataDelayedBy\":0,\"exchangeTimezoneName\":\"America/New_York\",\"exchangeTimezoneShortName\":\"EDT\",\"pageViews\":{\"midTermTrend\":\"UP\",\"longTermTrend\":\"UP\",\"shortTermTrend\":\"UP\"},\"gmtOffSetMilliseconds\":-14400000,\"esgPopulated\":false,\"tradeable\":false,\"components\":[\"^NQDMXJPLMAUD\",\"^NQDOG\",\"^NQUSBLM\",\"^NQDMXKRMCCADN\",\"^NQDXUSMLTCGN\",\"^NQUS500LCGN\",\"^NQDMXKRMCAUD\",\"^NQUSB9576LMGBPN\",\"^NQUSB9576LM\",\"^NQNALMEURN\",\"^NQSSSEN\",\"^NQUSB9000LMJPYN\",\"^NQUSBLMCAD\",\"^NQUSB9000LMEURN\",\"^NQDMXKRJPYN\",\"^NQDMXKRLMAUDN\",\"^NQNA9000LMGBPN\",\"^NQUSB9570LMJPY\",\"^NQDMXJPLMAUDN\",\"^NQDMXKRLMAUD\",\"^NQUSBLMJPY\",\"^NQNA9000LMEUR\",\"^NQNA9000LMCAD\",\"^NQGXGBLMN\",\"^NQUSB9000LMEUR\",\"^NQDXUSLCEUR\",\"^NQDXUSLCG\",\"^NQUSB9000LMCAD\",\"^NQDM9000LMJPY\",\"^NQG9000LMCADN\",\"^NQDMXKRAUD\",\"^NQDMXKRLMGBPN\",\"^NQGXGBLMGBPN\",\"^NQDM9000LMEURN\",\"^NQGXJPLMJPYN\",\"^NQNALMCADN\",\"^NQUSBLMEUR\",\"^NQG9000LMGBP\",\"^NQDM9000LMJPYN\",\"^NQNALMJPY\",\"^NQGXGBLMJPY\",\"^NQUSB9570LMGBPN\",\"^SOX\",\"^IXCO\",\"^NQGXJPLMJPY\",\"^NQDMXKR\",\"^NQDMXGBLMCADN\",\"^NQUSB9000LMJPY\",\"^NQGXGBLMEURN\",\"^NQGXJPLMCAD\",\"^NQGXJPLMEUR\",\"^NQDMXJPLMGBPN\",\"^NQDMXJPLMN\",\"^NQDMXKRMCEURN\",\"^NQDM9000LMAUD\",\"^NQDMXKRLMCADN\",\"^NQSSSE\",\"^NQUSB9000LMN\",\"^NQDXUSLC\",\"^NQUSB9570LMAUDN\",\"^NQGXGBLMJPYN\",\"^NQG9000LMJPYN\",\"^NQUSBLMEURN\",\"^NQDMXKRMCJPYN\",\"^NQDMXKRJPY\",\"^NQUSB9570LM\",\"^NQUSMLTCG\",\"^NQG9000LMAUD\",\"^NQUSB9576LMGBP\",\"^NQGXJPLMGBPN\",\"^NQUSB9000LMCADN\",\"^IXIC\",\"^NQNALM\",\"^NQUS500LC\",\"^NQDMXGBLMJPY\",\"^NQFFUSGN\",\"^NQNALMAUD\",\"^NQNA9000LMN\",\"^NQDXUSLCN\",\"^NQGXGBLMAUD\",\"^NQUSBLMN\",\"^NQDMXJPLMGBP\",\"^NQUSB9570LMCADN\",\"^NQDMXKRLMEUR\",\"^NQNALMAUDN\",\"^GMB\",\"^NQG9000LMEURN\",\"^NQUSB9576LMJPYN\",\"^NQDM9000LMCADN\",\"^NQDMXKRLMCAD\",\"^NQDMXGBLM\",\"^NQDMXKRMCJPY\",\"^NQUSB9570LMAUD\",\"^NQUSB9576LMAUD\",\"^NQNA9000LMGBP\",\"^NQDMXGBLMJPYN\",\"^NQDOGN\",\"^NQG9000LMN\",\"^NQDMXKRLMJPY\",\"^NQUSBLMJPYN\",\"^NQDM9000LMN\",\"^NQDMXGBLMCAD\",\"^NQDMXGBLMEURN\",\"^NQDMXKRGBPN\",\"^NQDMXGBLMEUR\",\"^NQDMXKRMCEUR\",\"^NQDMXKRAUDN\",\"^NQDMXKRLMJPYN\",\"^NQUSBLMCADN\",\"^NQDMXGBLMN\",\"^NQDMXKRMCCAD\",\"^NQNALMGBPN\",\"^NQGXGBLMCADN\",\"^NQGXJPLMCADN\",\"^NQGXJPLM\",\"^NQUSB9576LMEURN\",\"^NQNA9000LMAUD\",\"^NQUSB9570LMGBP\",\"^NQUSBLMGBP\",\"^NQNALMN\",\"^NQUSB9000LMAUD\",\"^NQNA9000LM\",\"^NQUSB9570LMEURN\",\"^NQDMXKRMCN\",\"^SX\",\"^NQGXJPLMAUDN\",\"^NQDMXKRLM\",\"^NQDM9000LMGBP\",\"^NQUSMLTCGN\",\"^NQNALMGBP\",\"^NQDMXJPLMJPYN\",\"^NQG9000LMEUR\",\"^NQGXGBLM\",\"^NQG9000LMCAD\",\"^NQDMXKRN\",\"^NQUSB9570LMN\",\"^NQDMXKRMCGBPN\",\"^NQCRDN\",\"^NQDMXJPLMEURN\",\"^NQG9000LMJPY\",\"^NQDXUSMLTCG\",\"^NQNA9000LMJPYN\",\"^NQFFUSMN\",\"^NQDMXJPLM\",\"^NQDMXKREUR\",\"^NQGXJPLMGBP\",\"^NQDM9000LMAUDN\",\"^NQDMXKRLMEURN\",\"^NQUSBLMAUD\",\"^NQGXGBLMGBP\",\"^NQDMXKRCAD\",\"^NQDMXKRMC\",\"^NQNA9000LMEURN\",\"^NQUSMGN\",\"^NQUSB9000LMAUDN\",\"^NQUSB9000LMGBP\",\"^NQDXUSLCEURN\",\"^GMBNTR\",\"^NQNA9000LMAUDN\",\"^NQG9000LMAUDN\",\"^NQUSB9576LMN\",\"^XCQ\",\"^NQNALMCAD\",\"^XCI\",\"^NQGXJPLMEURN\",\"^NQDM9000LM\",\"^NQDXUSLCGBP\",\"^NQGXJPLMN\",\"^NQNALMEUR\",\"^NQFFUSG\",\"^RCMP\",\"^NQGXGBLMEUR\",\"^NQUSB9576LMJPY\",\"^NQDMXKRGBP\",\"^NQDM9000LMEUR\",\"^NQFFUSM\",\"^NQDM9000LMCAD\",\"^NQDMXGBLMGBPN\",\"^NQCRD\",\"^NQDMXKRCADN\",\"^NQGXGBLMCAD\",\"^NQDMXGBLMGBP\",\"^NQUSB9576LMCADN\",\"^NQDM9000LMGBPN\",\"^NQDXUSLCGBPN\",\"^NQUSB9570LMJPYN\",\"^NQG9000LM\",\"^NQUSBLMGBPN\",\"^NQDMXKRLMN\",\"^NQGXJPLMAUD\",\"^NQDMXGBLMAUDN\",\"^NQUSB9000LM\",\"^NQDMXJPLMJPY\",\"^NQDXUSLCGN\",\"^NQUS500LCG\",\"^NQDMXKREURN\",\"^NQNALMJPYN\",\"^NQUSB9000LMGBPN\",\"^NQUSB9576LMCAD\",\"^NQG9000LMGBPN\",\"^NQUSB9576LMEUR\",\"^NQDMXJPLMCADN\",\"^NQUSB9570LMCAD\",\"^NQUSB9570LMEUR\",\"^NQDMXKRMCGBP\",\"^NQDMXGBLMAUD\",\"^NQUSBLMAUDN\",\"^NQNA9000LMJPY\",\"^DWUSSR\",\"^NQDMXJPLMCAD\",\"^NQDMXKRMCAUDN\",\"^NQDMXJPLMEUR\",\"^NQDMXKRLMGBP\",\"^NQGXGBLMAUDN\",\"^NQUSB9576LMAUDN\",\"^NQUS500LCN\",\"^NQNA9000LMCADN\"],\"targetPriceHigh\":200.0,\"targetPriceLow\":97.0,\"targetPriceMean\":137.91,\"targetPriceMedian\":140.0,\"heldPercentInsiders\":0.328,\"heldPercentInstitutions\":67.86,\"postMarketChangePercent\":-0.0427817,\"postMarketTime\":1653091199,\"postMarketPrice\":93.46,\"postMarketChange\":-0.0400009,\"regularMarketChange\":-3.1699982,\"regularMarketChangePercent\":-3.2791953,\"regularMarketTime\":1653076804,\"regularMarketPrice\":93.5,\"regularMarketDayHigh\":98.64,\"regularMarketDayRange\":\"88.26 - 98.64\",\"regularMarketDayLow\":88.26,\"regularMarketVolume\":163878936,\"sharesShort\":30359092,\"sharesShortPrevMonth\":27435575,\"shortPercentFloat\":1.88,\"regularMarketPreviousClose\":96.67,\"bid\":93.46,\"ask\":93.47,\"bidSize\":9,\"askSize\":8,\"exchange\":\"NMS\",\"market\":\"us_market\",\"messageBoardId\":\"finmb_168864\",\"fullExchangeName\":\"NasdaqGS\",\"shortName\":\"Advanced Micro Devices, Inc.\",\"longName\":\"Advanced Micro Devices, Inc.\",\"regularMarketOpen\":98.385,\"averageDailyVolume3Month\":110820367,\"averageDailyVolume10Day\":142848080,\"beta\":1.869196,\"fiftyTwoWeekLowChange\":16.699997,\"fiftyTwoWeekLowChangePercent\":0.21744786,\"fiftyTwoWeekRange\":\"76.8 - 164.46\",\"fiftyTwoWeekHighChange\":-70.96001,\"fiftyTwoWeekHighChangePercent\":-0.43147272,\"fiftyTwoWeekLow\":76.8,\"fiftyTwoWeekHigh\":164.46,\"firstTradeDateMilliseconds\":322151400000,\"priceHint\":2,\"totalCash\":6.5319997E9,\"floatShares\":1612859107,\"ebitda\":4857999872,\"shortRatio\":0.34,\"symbol\":\"AMD\"}],\"error\":null}}";
    }
}
